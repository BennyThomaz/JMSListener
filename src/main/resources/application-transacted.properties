# JMS Configuration with Transacted Sessions
jms.connection.factory.jndi=weblogic.jms.ConnectionFactory
jms.queue.jndi=jms/MyQueue
jms.initial.context.factory=weblogic.jndi.WLInitialContextFactory
jms.provider.url=t3://localhost:7001
jms.security.principal=weblogic
jms.security.credentials=weblogic1

# JNDI Timeout Settings (in milliseconds)
# Increased timeouts for reliable connection establishment
jms.jndi.timeout=60000
jms.jndi.read.timeout=120000

# Connection Pool Settings
jms.connection.pool.size=5
jms.connection.pool.max.idle=60000
jms.connection.pool.validation.interval=30000

# Message Processing Settings with TRANSACTION SUPPORT
# IMPORTANT: Set to true to enable transaction rollback on HTTP callback failures
jms.session.transacted=true
jms.message.acknowledgment.mode=SESSION_TRANSACTED
jms.consumer.message.selector=
jms.consumer.no.local=false

# Transaction Rollback Delay (prevents rapid retry loops)
# Set to 0 to disable delay, or specify milliseconds (e.g., 5000 = 5 seconds)
jms.transaction.rollback.delay=5000

# Application Settings
app.shutdown.timeout=30000
app.heartbeat.interval=60000
app.max.retry.attempts=3
app.retry.delay=5000

# Console Callback Configuration
console.callback.enabled=true

# HTTP Callback Configuration with Transaction Rollback Support
http.callback.enabled=true
http.callback.url=http://localhost:8080/api/jms-messages
http.callback.method=POST
http.callback.content.type=application/json
http.callback.timeout.connection=5000
http.callback.timeout.socket=15000
# Aggressive retry for transacted mode - ensures all reasonable attempts are made before rollback
http.callback.retry.attempts=5
http.callback.retry.delay=2000
http.callback.headers.authorization=Bearer transacted-api-token
http.callback.headers.x-source=JMS-Listener-Transacted

# Logging Configuration - Enhanced for transaction monitoring
logging.level.root=INFO
logging.level.com.example.jms=DEBUG
logging.level.com.example.jms.listener=DEBUG
logging.level.com.example.jms.callback=DEBUG
logging.file.name=logs/jms-listener-transacted.log
logging.file.max.size=10MB
logging.file.max.history=30

# Transaction Rollback Behavior Documentation:
# When jms.session.transacted=true:
# - HTTP callback failures will trigger JMS transaction rollback
# - Message will be returned to the queue for redelivery
# - All operations within the transaction boundary are rolled back
# - Detailed logging tracks transaction commit/rollback events

# Provider Configuration
jms.provider.config.file=weblogic.provider.json
